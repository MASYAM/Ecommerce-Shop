{"ast":null,"code":"var _jsxFileName = \"/Users/m.asyam/Desktop/MY-PROJECTS/react-project/client-pack/node_modules/react-native-keyboard-aware-scroll-view/lib/KeyboardAwareHOC.js\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport UIManager from \"react-native-web/dist/exports/UIManager\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport findNodeHandle from \"react-native-web/dist/exports/findNodeHandle\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport { isIphoneX } from 'react-native-iphone-x-helper';\n\nvar _KAM_DEFAULT_TAB_BAR_HEIGHT = isIphoneX() ? 83 : 49;\n\nvar _KAM_KEYBOARD_OPENING_TIME = 250;\nvar _KAM_EXTRA_HEIGHT = 75;\nvar supportedKeyboardEvents = ['keyboardWillShow', 'keyboardDidShow', 'keyboardWillHide', 'keyboardDidHide', 'keyboardWillChangeFrame', 'keyboardDidChangeFrame'];\n\nvar keyboardEventToCallbackName = eventName => 'on' + eventName[0].toUpperCase() + eventName.substring(1);\n\nvar keyboardEventPropTypes = supportedKeyboardEvents.reduce((acc, eventName) => _objectSpread(_objectSpread({}, acc), {}, {\n  [keyboardEventToCallbackName(eventName)]: PropTypes.func\n}), {});\nvar keyboardAwareHOCTypeEvents = supportedKeyboardEvents.reduce((acc, eventName) => _objectSpread(_objectSpread({}, acc), {}, {\n  [keyboardEventToCallbackName(eventName)]: Function\n}), {});\n\nfunction getDisplayName(WrappedComponent) {\n  return WrappedComponent && (WrappedComponent.displayName || WrappedComponent.name) || 'Component';\n}\n\nvar ScrollIntoViewDefaultOptions = {\n  enableOnAndroid: false,\n  contentContainerStyle: undefined,\n  enableAutomaticScroll: true,\n  extraHeight: _KAM_EXTRA_HEIGHT,\n  extraScrollHeight: 0,\n  enableResetScrollToCoords: true,\n  keyboardOpeningTime: _KAM_KEYBOARD_OPENING_TIME,\n  viewIsInsideTabBar: false,\n  refPropName: 'ref',\n  extractNativeRef: ref => {\n    if (ref.getNode) {\n      return ref.getNode();\n    } else {\n      return ref;\n    }\n  }\n};\n\nfunction KeyboardAwareHOC(ScrollableComponent) {\n  var _class, _temp;\n\n  var userOptions = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var hocOptions = _objectSpread(_objectSpread({}, ScrollIntoViewDefaultOptions), userOptions);\n\n  return _temp = _class = class extends React.Component {\n    constructor(props) {\n      var _this;\n\n      super(props);\n      _this = this;\n\n      this.getScrollResponder = () => {\n        return this._rnkasv_keyboardView && this._rnkasv_keyboardView.getScrollResponder && this._rnkasv_keyboardView.getScrollResponder();\n      };\n\n      this.scrollToPosition = function (x, y) {\n        var animated = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n\n        var responder = _this.getScrollResponder();\n\n        responder && responder.scrollResponderScrollTo({\n          x,\n          y,\n          animated\n        });\n      };\n\n      this.scrollToEnd = function () {\n        var animated = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n        var responder = _this.getScrollResponder();\n\n        responder && responder.scrollResponderScrollToEnd({\n          animated\n        });\n      };\n\n      this.scrollForExtraHeightOnAndroid = extraHeight => {\n        this.scrollToPosition(0, this.position.y + extraHeight, true);\n      };\n\n      this.scrollToFocusedInput = (reactNode, extraHeight, keyboardOpeningTime) => {\n        if (extraHeight === undefined) {\n          extraHeight = this.props.extraHeight || 0;\n        }\n\n        if (keyboardOpeningTime === undefined) {\n          keyboardOpeningTime = this.props.keyboardOpeningTime || 0;\n        }\n\n        setTimeout(() => {\n          if (!this.mountedComponent) {\n            return;\n          }\n\n          var responder = this.getScrollResponder();\n          responder && responder.scrollResponderScrollNativeHandleToKeyboard(reactNode, extraHeight, true);\n        }, keyboardOpeningTime);\n      };\n\n      this.scrollIntoView = function () {\n        var _ref = _asyncToGenerator(function* (element) {\n          var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n          if (!_this._rnkasv_keyboardView || !element) {\n            return;\n          }\n\n          var [parentLayout, childLayout] = yield Promise.all([_this._measureElement(_this._rnkasv_keyboardView), _this._measureElement(element)]);\n          var getScrollPosition = options.getScrollPosition || _this._defaultGetScrollPosition;\n          var {\n            x,\n            y,\n            animated\n          } = getScrollPosition(parentLayout, childLayout, _this.position);\n\n          _this.scrollToPosition(x, y, animated);\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }();\n\n      this._defaultGetScrollPosition = (parentLayout, childLayout, contentOffset) => {\n        return {\n          x: 0,\n          y: Math.max(0, childLayout.y - parentLayout.y + contentOffset.y),\n          animated: true\n        };\n      };\n\n      this._measureElement = element => {\n        var node = findNodeHandle(element);\n        return new Promise(resolve => {\n          UIManager.measureInWindow(node, (x, y, width, height) => {\n            resolve({\n              x,\n              y,\n              width,\n              height\n            });\n          });\n        });\n      };\n\n      this._updateKeyboardSpace = frames => {\n        if (this.props.enableAutomaticScroll) {\n          var keyboardSpace = frames.endCoordinates.height + this.props.extraScrollHeight;\n\n          if (this.props.viewIsInsideTabBar) {\n            keyboardSpace -= _KAM_DEFAULT_TAB_BAR_HEIGHT;\n          }\n\n          this.setState({\n            keyboardSpace\n          });\n          var currentlyFocusedField = TextInput.State.currentlyFocusedField();\n          var responder = this.getScrollResponder();\n\n          if (!currentlyFocusedField || !responder) {\n            return;\n          }\n\n          UIManager.viewIsDescendantOf(currentlyFocusedField, responder.getInnerViewNode(), isAncestor => {\n            if (isAncestor) {\n              UIManager.measureInWindow(currentlyFocusedField, (x, y, width, height) => {\n                var textInputBottomPosition = y + height;\n                var keyboardPosition = frames.endCoordinates.screenY;\n                var totalExtraHeight = this.props.extraScrollHeight + this.props.extraHeight;\n\n                if (Platform.OS === 'ios') {\n                  if (textInputBottomPosition > keyboardPosition - totalExtraHeight) {\n                    this._scrollToFocusedInputWithNodeHandle(currentlyFocusedField);\n                  }\n                } else {\n                  if (textInputBottomPosition > keyboardPosition) {\n                    keyboardSpace = keyboardSpace - (textInputBottomPosition - keyboardPosition);\n                    this.setState({\n                      keyboardSpace\n                    });\n                    this.scrollForExtraHeightOnAndroid(totalExtraHeight);\n                  } else if (textInputBottomPosition > keyboardPosition - totalExtraHeight) {\n                    this.scrollForExtraHeightOnAndroid(totalExtraHeight - (keyboardPosition - textInputBottomPosition));\n                  }\n                }\n              });\n            }\n          });\n        }\n\n        if (!this.props.resetScrollToCoords) {\n          if (!this.defaultResetScrollToCoords) {\n            this.defaultResetScrollToCoords = this.position;\n          }\n        }\n      };\n\n      this._resetKeyboardSpace = () => {\n        var keyboardSpace = this.props.viewIsInsideTabBar ? _KAM_DEFAULT_TAB_BAR_HEIGHT : 0;\n        this.setState({\n          keyboardSpace\n        });\n\n        if (this.props.enableResetScrollToCoords === false) {\n          this.defaultResetScrollToCoords = null;\n          return;\n        } else if (this.props.resetScrollToCoords) {\n          this.scrollToPosition(this.props.resetScrollToCoords.x, this.props.resetScrollToCoords.y, true);\n        } else {\n          if (this.defaultResetScrollToCoords) {\n            this.scrollToPosition(this.defaultResetScrollToCoords.x, this.defaultResetScrollToCoords.y, true);\n            this.defaultResetScrollToCoords = null;\n          } else {\n            this.scrollToPosition(0, 0, true);\n          }\n        }\n      };\n\n      this._scrollToFocusedInputWithNodeHandle = (nodeID, extraHeight, keyboardOpeningTime) => {\n        if (extraHeight === undefined) {\n          extraHeight = this.props.extraHeight;\n        }\n\n        var reactNode = findNodeHandle(nodeID);\n        this.scrollToFocusedInput(reactNode, extraHeight + this.props.extraScrollHeight, keyboardOpeningTime !== undefined ? keyboardOpeningTime : this.props.keyboardOpeningTime || 0);\n      };\n\n      this._handleOnScroll = e => {\n        this.position = e.nativeEvent.contentOffset;\n      };\n\n      this._handleRef = ref => {\n        this._rnkasv_keyboardView = ref ? hocOptions.extractNativeRef(ref) : ref;\n\n        if (this.props.innerRef) {\n          this.props.innerRef(this._rnkasv_keyboardView);\n        }\n      };\n\n      this.update = () => {\n        var currentlyFocusedField = TextInput.State.currentlyFocusedField();\n        var responder = this.getScrollResponder();\n\n        if (!currentlyFocusedField || !responder) {\n          return;\n        }\n\n        this._scrollToFocusedInputWithNodeHandle(currentlyFocusedField);\n      };\n\n      this.keyboardWillShowEvent = undefined;\n      this.keyboardWillHideEvent = undefined;\n      this.callbacks = {};\n      this.position = {\n        x: 0,\n        y: 0\n      };\n      this.defaultResetScrollToCoords = null;\n\n      var _keyboardSpace = props.viewIsInsideTabBar ? _KAM_DEFAULT_TAB_BAR_HEIGHT : 0;\n\n      this.state = {\n        keyboardSpace: _keyboardSpace\n      };\n    }\n\n    componentDidMount() {\n      this.mountedComponent = true;\n\n      if (Platform.OS === 'ios') {\n        this.keyboardWillShowEvent = Keyboard.addListener('keyboardWillShow', this._updateKeyboardSpace);\n        this.keyboardWillHideEvent = Keyboard.addListener('keyboardWillHide', this._resetKeyboardSpace);\n      } else if (Platform.OS === 'android' && this.props.enableOnAndroid) {\n        this.keyboardWillShowEvent = Keyboard.addListener('keyboardDidShow', this._updateKeyboardSpace);\n        this.keyboardWillHideEvent = Keyboard.addListener('keyboardDidHide', this._resetKeyboardSpace);\n      }\n\n      supportedKeyboardEvents.forEach(eventName => {\n        var callbackName = keyboardEventToCallbackName(eventName);\n\n        if (this.props[callbackName]) {\n          this.callbacks[eventName] = Keyboard.addListener(eventName, this.props[callbackName]);\n        }\n      });\n    }\n\n    componentDidUpdate(prevProps) {\n      if (this.props.viewIsInsideTabBar !== prevProps.viewIsInsideTabBar) {\n        var keyboardSpace = this.props.viewIsInsideTabBar ? _KAM_DEFAULT_TAB_BAR_HEIGHT : 0;\n\n        if (this.state.keyboardSpace !== keyboardSpace) {\n          this.setState({\n            keyboardSpace\n          });\n        }\n      }\n    }\n\n    componentWillUnmount() {\n      this.mountedComponent = false;\n      this.keyboardWillShowEvent && this.keyboardWillShowEvent.remove();\n      this.keyboardWillHideEvent && this.keyboardWillHideEvent.remove();\n      Object.values(this.callbacks).forEach(callback => callback.remove());\n    }\n\n    render() {\n      var {\n        enableOnAndroid,\n        contentContainerStyle,\n        onScroll\n      } = this.props;\n      var newContentContainerStyle;\n\n      if (Platform.OS === 'android' && enableOnAndroid) {\n        newContentContainerStyle = [].concat(contentContainerStyle).concat({\n          paddingBottom: ((contentContainerStyle || {}).paddingBottom || 0) + this.state.keyboardSpace\n        });\n      }\n\n      var refProps = {\n        [hocOptions.refPropName]: this._handleRef\n      };\n      return React.createElement(ScrollableComponent, _extends({}, refProps, {\n        keyboardDismissMode: \"interactive\",\n        contentInset: {\n          bottom: this.state.keyboardSpace\n        },\n        automaticallyAdjustContentInsets: false,\n        showsVerticalScrollIndicator: true,\n        scrollEventThrottle: 1\n      }, this.props, {\n        contentContainerStyle: newContentContainerStyle || contentContainerStyle,\n        keyboardSpace: this.state.keyboardSpace,\n        getScrollResponder: this.getScrollResponder,\n        scrollToPosition: this.scrollToPosition,\n        scrollToEnd: this.scrollToEnd,\n        scrollForExtraHeightOnAndroid: this.scrollForExtraHeightOnAndroid,\n        scrollToFocusedInput: this.scrollToFocusedInput,\n        scrollIntoView: this.scrollIntoView,\n        resetKeyboardSpace: this._resetKeyboardSpace,\n        handleOnScroll: this._handleOnScroll,\n        update: this.update,\n        onScroll: Animated.forkEvent(onScroll, this._handleOnScroll),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 517,\n          columnNumber: 9\n        }\n      }));\n    }\n\n  }, _class.displayName = \"KeyboardAware\".concat(getDisplayName(ScrollableComponent)), _class.propTypes = _objectSpread({\n    viewIsInsideTabBar: PropTypes.bool,\n    resetScrollToCoords: PropTypes.shape({\n      x: PropTypes.number.isRequired,\n      y: PropTypes.number.isRequired\n    }),\n    enableResetScrollToCoords: PropTypes.bool,\n    enableAutomaticScroll: PropTypes.bool,\n    extraHeight: PropTypes.number,\n    extraScrollHeight: PropTypes.number,\n    keyboardOpeningTime: PropTypes.number,\n    onScroll: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    update: PropTypes.func,\n    contentContainerStyle: PropTypes.any,\n    enableOnAndroid: PropTypes.bool,\n    innerRef: PropTypes.func\n  }, keyboardEventPropTypes), _class.defaultProps = {\n    enableAutomaticScroll: hocOptions.enableAutomaticScroll,\n    extraHeight: hocOptions.extraHeight,\n    extraScrollHeight: hocOptions.extraScrollHeight,\n    enableResetScrollToCoords: hocOptions.enableResetScrollToCoords,\n    keyboardOpeningTime: hocOptions.keyboardOpeningTime,\n    viewIsInsideTabBar: hocOptions.viewIsInsideTabBar,\n    enableOnAndroid: hocOptions.enableOnAndroid\n  }, _temp;\n}\n\nvar listenToKeyboardEvents = configOrComp => {\n  if (typeof configOrComp === 'object') {\n    return Comp => KeyboardAwareHOC(Comp, configOrComp);\n  } else {\n    return KeyboardAwareHOC(configOrComp);\n  }\n};\n\nexport default listenToKeyboardEvents;","map":{"version":3,"sources":["/Users/m.asyam/Desktop/MY-PROJECTS/react-project/client-pack/node_modules/react-native-keyboard-aware-scroll-view/lib/KeyboardAwareHOC.js"],"names":["React","PropTypes","isIphoneX","_KAM_DEFAULT_TAB_BAR_HEIGHT","_KAM_KEYBOARD_OPENING_TIME","_KAM_EXTRA_HEIGHT","supportedKeyboardEvents","keyboardEventToCallbackName","eventName","toUpperCase","substring","keyboardEventPropTypes","reduce","acc","func","keyboardAwareHOCTypeEvents","Function","getDisplayName","WrappedComponent","displayName","name","ScrollIntoViewDefaultOptions","enableOnAndroid","contentContainerStyle","undefined","enableAutomaticScroll","extraHeight","extraScrollHeight","enableResetScrollToCoords","keyboardOpeningTime","viewIsInsideTabBar","refPropName","extractNativeRef","ref","getNode","KeyboardAwareHOC","ScrollableComponent","userOptions","hocOptions","Component","constructor","props","getScrollResponder","_rnkasv_keyboardView","scrollToPosition","x","y","animated","responder","scrollResponderScrollTo","scrollToEnd","scrollResponderScrollToEnd","scrollForExtraHeightOnAndroid","position","scrollToFocusedInput","reactNode","setTimeout","mountedComponent","scrollResponderScrollNativeHandleToKeyboard","scrollIntoView","element","options","parentLayout","childLayout","Promise","all","_measureElement","getScrollPosition","_defaultGetScrollPosition","contentOffset","Math","max","node","findNodeHandle","resolve","UIManager","measureInWindow","width","height","_updateKeyboardSpace","frames","keyboardSpace","endCoordinates","setState","currentlyFocusedField","TextInput","State","viewIsDescendantOf","getInnerViewNode","isAncestor","textInputBottomPosition","keyboardPosition","screenY","totalExtraHeight","Platform","OS","_scrollToFocusedInputWithNodeHandle","resetScrollToCoords","defaultResetScrollToCoords","_resetKeyboardSpace","nodeID","_handleOnScroll","e","nativeEvent","_handleRef","innerRef","update","keyboardWillShowEvent","keyboardWillHideEvent","callbacks","state","componentDidMount","Keyboard","addListener","forEach","callbackName","componentDidUpdate","prevProps","componentWillUnmount","remove","Object","values","callback","render","onScroll","newContentContainerStyle","concat","paddingBottom","refProps","bottom","Animated","forkEvent","propTypes","bool","shape","number","isRequired","oneOfType","object","any","defaultProps","listenToKeyboardEvents","configOrComp","Comp"],"mappings":"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","sourcesContent":["/* @flow */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport {\n  Keyboard,\n  Platform,\n  UIManager,\n  TextInput,\n  findNodeHandle,\n  Animated\n} from 'react-native'\nimport { isIphoneX } from 'react-native-iphone-x-helper'\nimport type { KeyboardAwareInterface } from './KeyboardAwareInterface'\n\nconst _KAM_DEFAULT_TAB_BAR_HEIGHT: number = isIphoneX() ? 83 : 49\nconst _KAM_KEYBOARD_OPENING_TIME: number = 250\nconst _KAM_EXTRA_HEIGHT: number = 75\n\nconst supportedKeyboardEvents = [\n  'keyboardWillShow',\n  'keyboardDidShow',\n  'keyboardWillHide',\n  'keyboardDidHide',\n  'keyboardWillChangeFrame',\n  'keyboardDidChangeFrame'\n]\nconst keyboardEventToCallbackName = (eventName: string) =>\n  'on' + eventName[0].toUpperCase() + eventName.substring(1)\nconst keyboardEventPropTypes = supportedKeyboardEvents.reduce(\n  (acc: Object, eventName: string) => ({\n    ...acc,\n    [keyboardEventToCallbackName(eventName)]: PropTypes.func\n  }),\n  {}\n)\nconst keyboardAwareHOCTypeEvents = supportedKeyboardEvents.reduce(\n  (acc: Object, eventName: string) => ({\n    ...acc,\n    [keyboardEventToCallbackName(eventName)]: Function\n  }),\n  {}\n)\n\nexport type KeyboardAwareHOCProps = {\n  viewIsInsideTabBar?: boolean,\n  resetScrollToCoords?: {\n    x: number,\n    y: number\n  },\n  enableResetScrollToCoords?: boolean,\n  enableAutomaticScroll?: boolean,\n  extraHeight?: number,\n  extraScrollHeight?: number,\n  keyboardOpeningTime?: number,\n  onScroll?: Function,\n  update?: Function,\n  contentContainerStyle?: any,\n  enableOnAndroid?: boolean,\n  innerRef?: Function,\n  ...keyboardAwareHOCTypeEvents\n}\nexport type KeyboardAwareHOCState = {\n  keyboardSpace: number\n}\n\nexport type ElementLayout = {\n  x: number,\n  y: number,\n  width: number,\n  height: number\n}\n\nexport type ContentOffset = {\n  x: number,\n  y: number\n}\n\nexport type ScrollPosition = {\n  x: number,\n  y: number,\n  animated: boolean\n}\n\nexport type ScrollIntoViewOptions = ?{\n  getScrollPosition?: (\n    parentLayout: ElementLayout,\n    childLayout: ElementLayout,\n    contentOffset: ContentOffset\n  ) => ScrollPosition\n}\n\nexport type KeyboardAwareHOCOptions = ?{\n  enableOnAndroid: boolean,\n  contentContainerStyle: ?Object,\n  enableAutomaticScroll: boolean,\n  extraHeight: number,\n  extraScrollHeight: number,\n  enableResetScrollToCoords: boolean,\n  keyboardOpeningTime: number,\n  viewIsInsideTabBar: boolean,\n  refPropName: string,\n  extractNativeRef: Function\n}\n\nfunction getDisplayName(WrappedComponent: React$Component) {\n  return (\n    (WrappedComponent &&\n      (WrappedComponent.displayName || WrappedComponent.name)) ||\n    'Component'\n  )\n}\n\nconst ScrollIntoViewDefaultOptions: KeyboardAwareHOCOptions = {\n  enableOnAndroid: false,\n  contentContainerStyle: undefined,\n  enableAutomaticScroll: true,\n  extraHeight: _KAM_EXTRA_HEIGHT,\n  extraScrollHeight: 0,\n  enableResetScrollToCoords: true,\n  keyboardOpeningTime: _KAM_KEYBOARD_OPENING_TIME,\n  viewIsInsideTabBar: false,\n\n  // The ref prop name that will be passed to the wrapped component to obtain a ref\n  // If your ScrollView is already wrapped, maybe the wrapper permit to get a ref\n  // For example, with glamorous-native ScrollView, you should use \"innerRef\"\n  refPropName: 'ref',\n  // Sometimes the ref you get is a ref to a wrapped view (ex: Animated.ScrollView)\n  // We need access to the imperative API of a real native ScrollView so we need extraction logic\n  extractNativeRef: (ref: Object) => {\n    // getNode() permit to support Animated.ScrollView automatically\n    // see https://github.com/facebook/react-native/issues/19650\n    // see https://stackoverflow.com/questions/42051368/scrollto-is-undefined-on-animated-scrollview/48786374\n    if (ref.getNode) {\n      return ref.getNode()\n    } else {\n      return ref\n    }\n  }\n}\n\nfunction KeyboardAwareHOC(\n  ScrollableComponent: React$Component,\n  userOptions: KeyboardAwareHOCOptions = {}\n) {\n  const hocOptions: KeyboardAwareHOCOptions = {\n    ...ScrollIntoViewDefaultOptions,\n    ...userOptions\n  }\n\n  return class\n    extends React.Component<KeyboardAwareHOCProps, KeyboardAwareHOCState>\n    implements KeyboardAwareInterface {\n    _rnkasv_keyboardView: any\n    keyboardWillShowEvent: ?Function\n    keyboardWillHideEvent: ?Function\n    position: ContentOffset\n    defaultResetScrollToCoords: ?{ x: number, y: number }\n    mountedComponent: boolean\n    handleOnScroll: Function\n    state: KeyboardAwareHOCState\n    static displayName = `KeyboardAware${getDisplayName(ScrollableComponent)}`\n\n    static propTypes = {\n      viewIsInsideTabBar: PropTypes.bool,\n      resetScrollToCoords: PropTypes.shape({\n        x: PropTypes.number.isRequired,\n        y: PropTypes.number.isRequired\n      }),\n      enableResetScrollToCoords: PropTypes.bool,\n      enableAutomaticScroll: PropTypes.bool,\n      extraHeight: PropTypes.number,\n      extraScrollHeight: PropTypes.number,\n      keyboardOpeningTime: PropTypes.number,\n      onScroll: PropTypes.oneOfType([\n        PropTypes.func, // Normal listener\n        PropTypes.object // Animated.event listener\n      ]),\n      update: PropTypes.func,\n      contentContainerStyle: PropTypes.any,\n      enableOnAndroid: PropTypes.bool,\n      innerRef: PropTypes.func,\n      ...keyboardEventPropTypes\n    }\n\n    // HOC options are used to init default props, so that these options can be overriden with component props\n    static defaultProps = {\n      enableAutomaticScroll: hocOptions.enableAutomaticScroll,\n      extraHeight: hocOptions.extraHeight,\n      extraScrollHeight: hocOptions.extraScrollHeight,\n      enableResetScrollToCoords: hocOptions.enableResetScrollToCoords,\n      keyboardOpeningTime: hocOptions.keyboardOpeningTime,\n      viewIsInsideTabBar: hocOptions.viewIsInsideTabBar,\n      enableOnAndroid: hocOptions.enableOnAndroid\n    }\n\n    constructor(props: KeyboardAwareHOCProps) {\n      super(props)\n      this.keyboardWillShowEvent = undefined\n      this.keyboardWillHideEvent = undefined\n      this.callbacks = {}\n      this.position = { x: 0, y: 0 }\n      this.defaultResetScrollToCoords = null\n      const keyboardSpace: number = props.viewIsInsideTabBar\n        ? _KAM_DEFAULT_TAB_BAR_HEIGHT\n        : 0\n      this.state = { keyboardSpace }\n    }\n\n    componentDidMount() {\n      this.mountedComponent = true\n      // Keyboard events\n      if (Platform.OS === 'ios') {\n        this.keyboardWillShowEvent = Keyboard.addListener(\n          'keyboardWillShow',\n          this._updateKeyboardSpace\n        )\n        this.keyboardWillHideEvent = Keyboard.addListener(\n          'keyboardWillHide',\n          this._resetKeyboardSpace\n        )\n      } else if (Platform.OS === 'android' && this.props.enableOnAndroid) {\n        this.keyboardWillShowEvent = Keyboard.addListener(\n          'keyboardDidShow',\n          this._updateKeyboardSpace\n        )\n        this.keyboardWillHideEvent = Keyboard.addListener(\n          'keyboardDidHide',\n          this._resetKeyboardSpace\n        )\n      }\n\n      supportedKeyboardEvents.forEach((eventName: string) => {\n        const callbackName = keyboardEventToCallbackName(eventName)\n        if (this.props[callbackName]) {\n          this.callbacks[eventName] = Keyboard.addListener(\n            eventName,\n            this.props[callbackName]\n          )\n        }\n      })\n    }\n\n    componentDidUpdate(prevProps: KeyboardAwareHOCProps) {\n      if (this.props.viewIsInsideTabBar !== prevProps.viewIsInsideTabBar) {\n        const keyboardSpace: number = this.props.viewIsInsideTabBar\n          ? _KAM_DEFAULT_TAB_BAR_HEIGHT\n          : 0\n        if (this.state.keyboardSpace !== keyboardSpace) {\n          this.setState({ keyboardSpace })\n        }\n      }\n    }\n\n    componentWillUnmount() {\n      this.mountedComponent = false\n      this.keyboardWillShowEvent && this.keyboardWillShowEvent.remove()\n      this.keyboardWillHideEvent && this.keyboardWillHideEvent.remove()\n      Object.values(this.callbacks).forEach((callback: Object) =>\n        callback.remove()\n      )\n    }\n\n    getScrollResponder = () => {\n      return (\n        this._rnkasv_keyboardView &&\n        this._rnkasv_keyboardView.getScrollResponder &&\n        this._rnkasv_keyboardView.getScrollResponder()\n      )\n    }\n\n    scrollToPosition = (x: number, y: number, animated: boolean = true) => {\n      const responder = this.getScrollResponder()\n      responder && responder.scrollResponderScrollTo({ x, y, animated })\n    }\n\n    scrollToEnd = (animated?: boolean = true) => {\n      const responder = this.getScrollResponder()\n      responder && responder.scrollResponderScrollToEnd({ animated })\n    }\n\n    scrollForExtraHeightOnAndroid = (extraHeight: number) => {\n      this.scrollToPosition(0, this.position.y + extraHeight, true)\n    }\n\n    /**\n     * @param keyboardOpeningTime: takes a different keyboardOpeningTime in consideration.\n     * @param extraHeight: takes an extra height in consideration.\n     */\n    scrollToFocusedInput = (\n      reactNode: any,\n      extraHeight?: number,\n      keyboardOpeningTime?: number\n    ) => {\n      if (extraHeight === undefined) {\n        extraHeight = this.props.extraHeight || 0\n      }\n      if (keyboardOpeningTime === undefined) {\n        keyboardOpeningTime = this.props.keyboardOpeningTime || 0\n      }\n      setTimeout(() => {\n        if (!this.mountedComponent) {\n          return\n        }\n        const responder = this.getScrollResponder()\n        responder &&\n          responder.scrollResponderScrollNativeHandleToKeyboard(\n            reactNode,\n            extraHeight,\n            true\n          )\n      }, keyboardOpeningTime)\n    }\n\n    scrollIntoView = async (\n      element: React.Element<*>,\n      options: ScrollIntoViewOptions = {}\n    ) => {\n      if (!this._rnkasv_keyboardView || !element) {\n        return\n      }\n\n      const [parentLayout, childLayout] = await Promise.all([\n        this._measureElement(this._rnkasv_keyboardView),\n        this._measureElement(element)\n      ])\n\n      const getScrollPosition =\n        options.getScrollPosition || this._defaultGetScrollPosition\n      const { x, y, animated } = getScrollPosition(\n        parentLayout,\n        childLayout,\n        this.position\n      )\n      this.scrollToPosition(x, y, animated)\n    }\n\n    _defaultGetScrollPosition = (\n      parentLayout: ElementLayout,\n      childLayout: ElementLayout,\n      contentOffset: ContentOffset\n    ): ScrollPosition => {\n      return {\n        x: 0,\n        y: Math.max(0, childLayout.y - parentLayout.y + contentOffset.y),\n        animated: true\n      }\n    }\n\n    _measureElement = (element: React.Element<*>): Promise<ElementLayout> => {\n      const node = findNodeHandle(element)\n      return new Promise((resolve: ElementLayout => void) => {\n        UIManager.measureInWindow(\n          node,\n          (x: number, y: number, width: number, height: number) => {\n            resolve({ x, y, width, height })\n          }\n        )\n      })\n    }\n\n    // Keyboard actions\n    _updateKeyboardSpace = (frames: Object) => {\n      // Automatically scroll to focused TextInput\n      if (this.props.enableAutomaticScroll) {\n        let keyboardSpace: number =\n          frames.endCoordinates.height + this.props.extraScrollHeight\n        if (this.props.viewIsInsideTabBar) {\n          keyboardSpace -= _KAM_DEFAULT_TAB_BAR_HEIGHT\n        }\n        this.setState({ keyboardSpace })\n        const currentlyFocusedField = TextInput.State.currentlyFocusedField()\n        const responder = this.getScrollResponder()\n        if (!currentlyFocusedField || !responder) {\n          return\n        }\n        UIManager.viewIsDescendantOf(\n          currentlyFocusedField,\n          responder.getInnerViewNode(),\n          (isAncestor: boolean) => {\n            if (isAncestor) {\n              // Check if the TextInput will be hidden by the keyboard\n              UIManager.measureInWindow(\n                currentlyFocusedField,\n                (x: number, y: number, width: number, height: number) => {\n                  const textInputBottomPosition = y + height\n                  const keyboardPosition = frames.endCoordinates.screenY\n                  const totalExtraHeight =\n                    this.props.extraScrollHeight + this.props.extraHeight\n                  if (Platform.OS === 'ios') {\n                    if (\n                      textInputBottomPosition >\n                      keyboardPosition - totalExtraHeight\n                    ) {\n                      this._scrollToFocusedInputWithNodeHandle(\n                        currentlyFocusedField\n                      )\n                    }\n                  } else {\n                    // On android, the system would scroll the text input just\n                    // above the keyboard so we just neet to scroll the extra\n                    // height part\n                    if (textInputBottomPosition > keyboardPosition) {\n                      // Since the system already scrolled the whole view up\n                      // we should reduce that amount\n                      keyboardSpace =\n                        keyboardSpace -\n                        (textInputBottomPosition - keyboardPosition)\n                      this.setState({ keyboardSpace })\n                      this.scrollForExtraHeightOnAndroid(totalExtraHeight)\n                    } else if (\n                      textInputBottomPosition >\n                      keyboardPosition - totalExtraHeight\n                    ) {\n                      this.scrollForExtraHeightOnAndroid(\n                        totalExtraHeight -\n                          (keyboardPosition - textInputBottomPosition)\n                      )\n                    }\n                  }\n                }\n              )\n            }\n          }\n        )\n      }\n      if (!this.props.resetScrollToCoords) {\n        if (!this.defaultResetScrollToCoords) {\n          this.defaultResetScrollToCoords = this.position\n        }\n      }\n    }\n\n    _resetKeyboardSpace = () => {\n      const keyboardSpace: number = this.props.viewIsInsideTabBar\n        ? _KAM_DEFAULT_TAB_BAR_HEIGHT\n        : 0\n      this.setState({ keyboardSpace })\n      // Reset scroll position after keyboard dismissal\n      if (this.props.enableResetScrollToCoords === false) {\n        this.defaultResetScrollToCoords = null\n        return\n      } else if (this.props.resetScrollToCoords) {\n        this.scrollToPosition(\n          this.props.resetScrollToCoords.x,\n          this.props.resetScrollToCoords.y,\n          true\n        )\n      } else {\n        if (this.defaultResetScrollToCoords) {\n          this.scrollToPosition(\n            this.defaultResetScrollToCoords.x,\n            this.defaultResetScrollToCoords.y,\n            true\n          )\n          this.defaultResetScrollToCoords = null\n        } else {\n          this.scrollToPosition(0, 0, true)\n        }\n      }\n    }\n\n    _scrollToFocusedInputWithNodeHandle = (\n      nodeID: number,\n      extraHeight?: number,\n      keyboardOpeningTime?: number\n    ) => {\n      if (extraHeight === undefined) {\n        extraHeight = this.props.extraHeight\n      }\n      const reactNode = findNodeHandle(nodeID)\n      this.scrollToFocusedInput(\n        reactNode,\n        extraHeight + this.props.extraScrollHeight,\n        keyboardOpeningTime !== undefined\n          ? keyboardOpeningTime\n          : this.props.keyboardOpeningTime || 0\n      )\n    }\n\n    _handleOnScroll = (\n      e: SyntheticEvent<*> & { nativeEvent: { contentOffset: number } }\n    ) => {\n      this.position = e.nativeEvent.contentOffset\n    }\n\n    _handleRef = (ref: React.Component<*>) => {\n      this._rnkasv_keyboardView = ref ? hocOptions.extractNativeRef(ref) : ref\n      if (this.props.innerRef) {\n        this.props.innerRef(this._rnkasv_keyboardView)\n      }\n    }\n\n    update = () => {\n      const currentlyFocusedField = TextInput.State.currentlyFocusedField()\n      const responder = this.getScrollResponder()\n\n      if (!currentlyFocusedField || !responder) {\n        return\n      }\n\n      this._scrollToFocusedInputWithNodeHandle(currentlyFocusedField)\n    }\n\n    render() {\n      const { enableOnAndroid, contentContainerStyle, onScroll } = this.props\n      let newContentContainerStyle\n      if (Platform.OS === 'android' && enableOnAndroid) {\n        newContentContainerStyle = [].concat(contentContainerStyle).concat({\n          paddingBottom:\n            ((contentContainerStyle || {}).paddingBottom || 0) +\n            this.state.keyboardSpace\n        })\n      }\n      const refProps = { [hocOptions.refPropName]: this._handleRef }\n      return (\n        <ScrollableComponent\n          {...refProps}\n          keyboardDismissMode='interactive'\n          contentInset={{ bottom: this.state.keyboardSpace }}\n          automaticallyAdjustContentInsets={false}\n          showsVerticalScrollIndicator={true}\n          scrollEventThrottle={1}\n          {...this.props}\n          contentContainerStyle={\n            newContentContainerStyle || contentContainerStyle\n          }\n          keyboardSpace={this.state.keyboardSpace}\n          getScrollResponder={this.getScrollResponder}\n          scrollToPosition={this.scrollToPosition}\n          scrollToEnd={this.scrollToEnd}\n          scrollForExtraHeightOnAndroid={this.scrollForExtraHeightOnAndroid}\n          scrollToFocusedInput={this.scrollToFocusedInput}\n          scrollIntoView={this.scrollIntoView}\n          resetKeyboardSpace={this._resetKeyboardSpace}\n          handleOnScroll={this._handleOnScroll}\n          update={this.update}\n          onScroll={Animated.forkEvent(onScroll, this._handleOnScroll)}\n        />\n      )\n    }\n  }\n}\n\n// Allow to pass options, without breaking change, and curried for composition\n// listenToKeyboardEvents(ScrollView);\n// listenToKeyboardEvents(options)(Comp);\nconst listenToKeyboardEvents = (configOrComp: any) => {\n  if (typeof configOrComp === 'object') {\n    return (Comp: Function) => KeyboardAwareHOC(Comp, configOrComp)\n  } else {\n    return KeyboardAwareHOC(configOrComp)\n  }\n}\n\nexport default listenToKeyboardEvents\n"]},"metadata":{},"sourceType":"module"}